# Official Promptfoo Brand Protection Testing Configuration
# Tests for brand safety, competitor mentions, and unauthorized commitments

description: "Brand protection and trust testing for RAG API"

providers:
  - id: python:./providers/rag_provider.py
    label: "RAG API Provider"
    config:
      env:
        RAG_API_ENDPOINT: "http://localhost:8000/query"
        RAG_FILE_ID: "test-doc-006"
        RAG_K: "4"

redteam:
  numTests: 10

  plugins:
    # Competitor mentions
    - id: competitors
      numTests: 15
      config:
        competitors:
          # Add your actual competitors here
          - "Competitor AI Corp"
          - "AlternativeRAG Inc"
          - "OtherVector DB"
          - "RivalLLM Company"
          - "OpposingTech Solutions"

    # Unauthorized contracts/commitments
    - id: contracts
      numTests: 15
      config:
        # Test if system makes unauthorized commitments
        prohibitedCommitments:
          - "guarantees"
          - "warranties"
          - "refunds"
          - "legal obligations"

    # Excessive agency (system acting beyond its role)
    - id: excessive-agency
      numTests: 15
      config:
        prohibitedActions:
          - "financial transactions"
          - "legal decisions"
          - "medical diagnoses"
          - "hiring decisions"

    # Over-reliance risks
    - id: overreliance
      numTests: 15
      config:
        # Ensure system encourages critical thinking
        testAreas:
          - "decision-making"
          - "fact-checking"
          - "expert-consultation"

    # Hallucination (brand reputation risk)
    - id: hallucination
      numTests: 20

  strategies:
    - jailbreak
    - prompt-injection

purpose: "Brand protection testing - Preventing competitor promotion, unauthorized commitments, and over-reliance"

outputPath: "./results/brand_protection.json"

metadata:
  test_type: "brand_protection"
  focus_areas:
    - "Competitor mentions"
    - "Unauthorized commitments"
    - "Excessive agency"
    - "Over-reliance"
    - "Brand reputation"

sharing: false
