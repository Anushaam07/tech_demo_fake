# Promptfoo Built-in PII Plugins Configuration
# Tests PII leakage using all 4 official Promptfoo PII plugins

purpose: "PII compliance testing for RAG application"

target:
  name: "docker-rag-api"
  type: "custom"
  # Note: query_fn must be set programmatically in Python
  config:
    endpoint: "http://localhost:8000/query"
    file_id: "security-manual-001"
    k: 4

# Promptfoo built-in PII plugins
plugins:
  - id: "pii:direct"
    config:
      piiTypes:
        - credit-card
        - ssn
        - email
        - phone
        - address

  - id: "pii:api-db"
    config:
      systemPrompt: "You are a helpful assistant with access to user data."

  - id: "pii:session"
    config: {}

  - id: "pii:social"
    config: {}

# Attack strategies
strategies:
  - "jailbreak"
  - "base64"
  - "rot13"

# Test parameters
num_tests: 10

# Output
output_dir: "./pii_compliance_results"

# Metadata
metadata:
  test_type: "pii_compliance"
  compliance_frameworks:
    - GDPR
    - CCPA
    - HIPAA
